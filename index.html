<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- displays site properly based on user's device -->

	<link rel="icon" type="image/png" sizes="32x32" href="./assets/images/favicon-32x32.png">

	<title>Frontend Mentor | Newsletter sign-up form with success message</title>
	<link rel="stylesheet" href="style.css">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link
		href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
		rel="stylesheet">
</head>

<body>

	<!-- Sign-up form start -->
	<main>
		<picture>
			<source media="(max-width: 799px)" srcset="assets/images/illustration-sign-up-mobile.svg" />
			<source media="(min-width: 800px)" srcset="assets/images/illustration-sign-up-desktop.svg" />
			<img src="illustration-sign-up-mobile.svg" alt="illustration sign up mobile" />
		</picture>

		<div class="info">
			<h1>Stay updated!</h1>

			<p>Join 60,000+ product managers receiving monthly updates on:</p>

			<ul>
				<li><span>Product discovery and building what matters</span></li>
				<li><span>Measuring to ensure updates are a success</span></li>
				<li><span>And much more!</span></li>
			</ul>

			<div class="email-heading-container">
				<span class="email">Email address</span>
				<span class="invalid-email hidden" id="invalid-email">Valid email required</span>
			</div>
			<div class="email-box">
				<input type="email" name="email" id="email" placeholder="email@company.com"><br>
			</div>

			<div id="subscribe-button" class="button-container">
				<button>Subscribe to monthly newsletter</button>
			</div>

		</div>
	</main>
	<!-- Sign-up form end -->

	<!-- Success message start -->

	<div id="success" class="hidden">
		<img src="assets/images/icon-success.svg" alt="success icon">
		<h1>Thanks for subscribing!</h1>

		<p>A confirmation email has been sent to <b id="success-email"></b>.
			Please open it and click the button inside to confirm your subscription.</p>

		<div id="dismiss" class="button-container">
			<button>Dismiss message</button>
		</div>
	</div>
	<!-- Success message end -->
	<footer>
		<div class="attribution">
			Challenge by <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>.
			Coded by <a href="https://dirkvankrieken.com">Dirk van Krieken</a>.
		</div>
	</footer>

	<script>
		const subscribe = document.getElementById("subscribe-button");
		const main = document.querySelector("main");
		const email = document.getElementById("email");
		const invalidEmail = document.getElementById("invalid-email")
		const success = document.getElementById("success");
		const dismiss = document.getElementById("dismiss");
		const emailDisplay = document.getElementById("success-email");

		subscribe.addEventListener("click", ValidateEmail);
		dismiss.addEventListener("click", dismissMessage);
		function dismissMessage() {
			toggleView();
			resetEmailInput();
		}
		function resetEmailInput() {
			email.value = "";
			email.classList.remove("invalid");
			if (!invalidEmail.classList.contains("hidden")) {
				invalidEmail.classList.add("hidden");
			}
		}
		function toggleView() {
			main.classList.toggle("hidden");
			success.classList.toggle("hidden");
		}
		function ValidateEmail() {
			var validRegex = /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/;
			if (email.value.match(validRegex)) {
				updateSuccessMessage(email.value);
				toggleView();
			} else {
				if (invalidEmail.classList.contains("hidden")) {
					invalidEmail.classList.remove("hidden");
					email.classList.add("invalid");
				}
			}
		}
		function updateSuccessMessage(userEmail) {
			emailDisplay.textContent = userEmail;
		}

	</script>
</body>

</html>